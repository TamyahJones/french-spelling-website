<!DOCTYPE html>
<html>
<head>

<title>French Spellings</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" ></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js" ></script>

<style>
.main {
	padding: 60px 15px;
	text-align: center;
}

#buttons {
	color:#fff;
}

</style>

<script>

	var data;
	var done = -1;
	var correct = 0;
	var timer;

	function start() {
		$('#start').hide();
		$('#test').show();
		var totalTime = 11;
		var counter = totalTime;
		function tick() {
			$('#countdown').html(counter);
			timer = window.setTimeout(next, 1000)
		}
		function next() {	
			counter--;
			if (counter == 0) {
				$('#test').html('Finished.  ' + done + ' words completed, ' + correct + ' correct."' );
			} 
			else {
				if (counter < 5) {
					$('#countdown-label').removeClass('alert-warning').addClass('alert-danger');
				} else if (counter < 10) {
					$('#countdown-label').removeClass('alert-info').addClass('alert-warning');
				}
				tick();	
			}
		}
		tick();
		nextWord();
		
	}

	function pass() {
		correct++;
		nextWord();
	}

	function nextWord() {
		if(data.length == 0) {
			clearTimeout(timer);
			$('#spell').text('Well done, you finished the list.');
			$('#buttons').remove();
		} else {
			var w = data.pop();
			$('#eng-word').text(w[0]);
			$('#fr-word').text(w[1]);
		}
		done++;
		$('#completed').text(done);
		$('#correct').text(correct);
	}

	function fail() {
		nextWord();
	}
	$(function() {
		$('#test').hide();
		$.getJSON('data.json', null, function(d) {
			data = _(d).shuffle();
			$('#start').click(start);		
			$('#pass').click(pass);
			$('#fail').click(fail);
		});	
	});
</script>
</head>
	<body>

 <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Feench Spelling Revision</span>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#about">About</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">
	     <div class="main">
	     	<button id="start" type="button" class="btn btn-lg btn-primary">Start</button>
			<div id="test">
				<h1>
				<div id="spell" class="row">
					<h1><div id="eng-word" class="col-md-4 col-md-offset-2"></div></h1>
					<h1><div id="fr-word" class="col-md-4" ></div></h1>
				</div>
			</h1>
				<div class="row" style="margin-top:10em">
						<span id="countdown-label" class="alert alert-info">Countdown: <span class "badge" id="countdown"></span>s</span>

						<span class="alert alert-info"><span id="completed"></span>  words completed, <span id="correct"></span> correct.</span>
				</div>

				<div id="buttons" class="row">
					<div class="col-md-6">
						<button id="pass" type="button" class="btn btn-lg btn-success">&#10004;</button>
					</div>
					<div class="col-md-6">
						<button type="button" id="fail" class="btn btn-lg btn-danger">&#10008;</button>
					</div>
				</div>
				
			</div>
		</div>	
	</div>
	</body>
</html>